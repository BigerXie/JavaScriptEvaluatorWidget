TW.Runtime.Widgets.javascriptevaluator=function(){var c=this;this.runtimeProperties=function(){var a=this.strToJson(c.getProperty("_InputParametersDataShape")),b={},d;for(d in a)"STRING"===a[d]&&(b[d]={isLocalizable:!0});return{needsDataLoadingAndError:!1,propertyAttributes:b}};this.renderHtml=function(){return'<div class="widget-content widget-javascriptevaluator" style="display:none;"></div>'};this.serviceInvoked=function(a){if("Evaluate"===a){a=c.getProperty("code");var b=c.getProperty("debugMode"),
d=this.strToJson(c.getProperty("_InputParametersDataShape")),f="var result;";for(e in d)f+="var "+e+" = thisWidget.getProperty('"+e+"');";var e="try {"+f+a+"} catch (exception) {console.log(exception);}";b&&(console.log("JavaScriptEvaluator - evaluate -> Start"),console.log("JavaScriptEvaluator - evaluate -> variableDefinitions = "+f),console.log("JavaScriptEvaluator - evaluate -> code = "+a),console.log("JavaScriptEvaluator - evaluate -> completeCode = "+e));eval(e);b&&(console.log("JavaScriptEvaluator - evaluate -> result = "+
result),console.log("JavaScriptEvaluator - evaluate -> Stop"));c.setProperty("result",result);c.jqElement.triggerHandler("Evaluated")}};this.updateProperty=function(a){if("code"===a.TargetProperty)this.setProperty("code",a.RawSinglePropertyValue);else{var b=this.strToJson(this.getProperty("_InputParametersDataShape"));if(a.TargetProperty in b)switch(b[a.TargetProperty]){case "INTEGER":this.setProperty(a.TargetProperty,parseInt(a.SinglePropertyValue,10));break;case "NUMBER":this.setProperty(a.TargetProperty,
parseFloat(a.SinglePropertyValue));break;case "DATETIME":this.setProperty(a.TargetProperty,new Date(a.SinglePropertyValue));break;case "BOOLEAN":this.setProperty(a.TargetProperty,"true"===a.SinglePropertyValue||!0===a.SinglePropertyValue);break;default:this.setProperty(a.TargetProperty,a.RawSinglePropertyValue)}}};this.strToJson=function(a){a?"string"===typeof a&&(a=JSON.parse(a)):a={};return a}};